<div class="dashboard-container" [class.dark-theme]="false">
  <!-- Top AppBar -->
  <app-navbar class="no-print"></app-navbar>

  <!-- Filter Bar -->
  <app-filter-bar 
    class="no-print"
    [isAdmin]="isAdminMode()"
    (filtersChanged)="onFiltersChanged($event)"
    (printRequested)="onPrintRequested()"
    (adminToggled)="toggleAdminDrawer()">
  </app-filter-bar>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Chart Section (65%) -->
    <div class="chart-section" [class.print-full-width]="true">
      <mat-card class="chart-card">
        <mat-card-content>
          <app-chart
            [filters]="currentFilters()"
            [selectedMeasurement]="selectedMeasurement()"
            (measurementSelected)="onChartPointSelected($event)">
          </app-chart>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Data Table Section (35%) -->
    <div class="table-section">
      <mat-card class="table-card">
        <mat-card-content>
          <app-data-table
            [filters]="currentFilters()"
            [selectedMeasurement]="selectedMeasurement()"
            (measurementSelected)="onMeasurementSelected($event)">
          </app-data-table>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Admin Drawer -->
  <mat-sidenav-container class="admin-container no-print" *ngIf="isAdminMode()">
    <mat-sidenav 
      #drawer 
      mode="over" 
      position="end" 
      [opened]="isDrawerOpen()"
      (closed)="isDrawerOpen.set(false)">
      <app-admin-drawer 
        (drawerClosed)="isDrawerOpen.set(false)">
      </app-admin-drawer>
    </mat-sidenav>
  </mat-sidenav-container>
</div>